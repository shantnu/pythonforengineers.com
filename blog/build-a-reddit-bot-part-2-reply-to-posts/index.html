<!DOCTYPE html>
<html lang="en">
<head>

    <title>Build a Reddit Bot Part 2: Reply to posts</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../../assets/built/screen.css" />

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">


    <meta property="og:site_name" content="Python for Engineers">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Build a Reddit Bot Part 2: Reply to posts">
    <meta property="og:description" content="Part 1: Read posts from reddit
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-1/]

Part 2: Reply to posts
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/]

Part 3: Automate our Bot
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-3-automate-your-bot/]

Part 4: Marvin the Depressed Bot
[https://new.pythonforengineers.com/blog/build-marvin-the-depressed-reddit-bot-in-python/]

NOTE: Before we start,">
    <meta property="og:url" content="https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/">
    <meta property="article:published_time" content="2021-08-16T14:13:32.000Z">
    <meta property="article:modified_time" content="2021-08-16T14:16:56.000Z">
    <meta property="article:tag" content="bot">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Build a Reddit Bot Part 2: Reply to posts">
    <meta name="twitter:description" content="Part 1: Read posts from reddit
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-1/]

Part 2: Reply to posts
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/]

Part 3: Automate our Bot
[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-3-automate-your-bot/]

Part 4: Marvin the Depressed Bot
[https://new.pythonforengineers.com/blog/build-marvin-the-depressed-reddit-bot-in-python/]

NOTE: Before we start,">
    <meta name="twitter:url" content="https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Shantnu Tiwari">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="bot">

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Python for Engineers",
        "url": "https://new.pythonforengineers.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://new.pythonforengineers.com/favicon.ico"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Shantnu Tiwari",
        "image": {
            "@type": "ImageObject",
            "url": "https://new.pythonforengineers.com/content/images/2021/08/shantnu-foto-small-1.jpg"
        },
        "url": "https://new.pythonforengineers.com/author/shantnu/",
        "sameAs": []
    },
    "headline": "Build a Reddit Bot Part 2: Reply to posts",
    "url": "https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/",
    "datePublished": "2021-08-16T14:13:32.000Z",
    "dateModified": "2021-08-16T14:16:56.000Z",
    "keywords": "bot",
    "description": "Part 1: Read posts from reddit\n[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-1/]\n\nPart 2: Reply to posts\n[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/]\n\nPart 3: Automate our Bot\n[https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-3-automate-your-bot/]\n\nPart 4: Marvin the Depressed Bot\n[https://new.pythonforengineers.com/blog/build-marvin-the-depressed-reddit-bot-in-python/]\n\nNOTE: Before we start, I have a request to make. I cr",
    "mainEntityOfPage": "https://new.pythonforengineers.com/blog/build-a-reddit-bot-part-2-reply-to-posts/"
}
    </script>

    <meta name="generator" content="Ghost 5.129">
    <link rel="alternate" type="application/rss+xml" title="Python for Engineers" href="../rss/index.html">


    <link href="https://new.pythonforengineers.com/webmentions/receive/" rel="webmention">
    <script defer src="../../public/cards.min.js%3Fv=ddf1563274"></script>
    <link rel="stylesheet" type="text/css" href="../../public/cards.min.css%3Fv=ddf1563274.css">
    <script defer src="../../public/member-attribution.min.js%3Fv=ddf1563274"></script><style>:root {--ghost-accent-color: #FF1A75;}</style>
    <link rel="stylesheet" href="/assets/css/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="/assets/css/prism-toolbar.min.css" />

</head>
<body class="post-template tag-bot">
<div class="viewport">

    <header id="gh-head" class="gh-head ">
        <nav class="gh-head-inner inner gh-container">

            <div class="gh-head-brand">
                <a class="gh-head-logo" href="../../home/index.html">
                        Python for Engineers
                </a>
                <a class="gh-burger" role="button">
                    <div class="gh-burger-box">
                        <div class="gh-burger-inner"></div>
                    </div>
                </a>
            </div>
            <div class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="../../home/index.html">Home</a></li>
    <li class="nav-about-contact"><a href="../../about/index.html">About/Contact</a></li>
    <li class="nav-books"><a href="../../books.html">Books</a></li>
    <li class="nav-blog"><a href="../../author/Shantnu/index.html">Blog</a></li>
    <li class="nav-search"><a href="index.html#/search">Search</a></li>
</ul>

            </div>

        </nav>
    </header>

    <main>




<article class="article post tag-bot no-image">

    <header class="article-header gh-canvas">

        <section class="article-tag">
            <a href="../../tag/bot/index.html">bot</a>
        </section>

        <h1 class="article-title">Build a Reddit Bot Part 2: Reply to posts</h1>


        <div class="article-byline">
            <section class="article-byline-content">
                <ul class="author-list">
                    <li class="author-list-item">
                        <a href="../../author/Shantnu/index.html" class="author-avatar">
                            <img class="author-profile-image" src="../../content/images/size/w100/2021/08/shantnu-foto-small-1.jpg" alt="Shantnu Tiwari" />
                        </a>
                    </li>
                </ul>
                <div class="article-byline-meta">
                    <h4 class="author-name"><a href="../../author/Shantnu/index.html">Shantnu Tiwari</a></h4>
                    <div class="byline-meta-content">
                        <time class="byline-meta-date" datetime="2021-08-16">Aug 16, 2021</time>
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 4 min read</span>
                    </div>
                </div>
            </section>
        </div>

    </header>

    <section class="gh-content gh-canvas">
        <p><a href="../build-a-reddit-bot-part-1/index.html">Part 1: Read posts from reddit</a></p><p><a href="index.html">Part 2: Reply to posts</a></p><p><a href="../build-a-reddit-bot-part-3-automate-your-bot/index.html">Part 3: Automate our Bot</a></p><p><a href="../build-marvin-the-depressed-reddit-bot-in-python/index.html">Part 4: Marvin the Depressed Bot</a></p><!--kg-card-begin: markdown--><p>NOTE: Before we start, I have a request to make. I created a special Reddit for this series. Please please please stick to that. I don’t want you spamming other Reddits. The moderators may ban you, and Reddit may ban my user agent (please read part one if you don’t know what that means). So please stick to practising here:</p>
<p><a href="https://www.reddit.com/r/pythonforengineers?ref=new.pythonforengineers.com">https://www.reddit.com/r/pythonforengineers</a></p>
<p>This is my own sub-Reddit, and you have full permission to play in that region.</p>
<p>Before we start, all the source code is <a href="https://github.com/shantnu/RedditBot/?ref=new.pythonforengineers.com">here</a>.</p>
<h2 id="two-things-our-bot-needs-to-do">Two things our bot needs to do</h2>
<p>1.Search our subreddit for the words “I love Python” and reply to it. It can’t assume case sensitivity</p>
<p>2.Keep a list of posts it has already replied to, so we are not replying to the same post again and again.</p>
<p>We already looked at how to do (1) in Part 1.</p>
<p>To keep a track of posts we have replied to, we could use something like a database. To keep it simple, I’m going to use a simple text file.</p>
<h2 id="login-to-reddit-with-your-bot">Login to Reddit with your bot</h2>
<p>If you entered your username and password in praw.ini, you should be able to post messages with no problem.</p>
<p>Open the file <em>reply_post.py:</em></p>
<pre><code class="language-python">import praw
import pdb
import re
import os
</code></pre>
<p>We start off by importing everything we need.</p>
<pre><code class="language-python"># Create the Reddit instance
reddit = praw.Reddit('bot1')
</code></pre>
<p>This code is the same as before. We create a Reddit instance.</p>
<p>As mentioned earlier, I am going to store the posts we have replied to in a text file called <em>posts_replied_to.txt.</em> Each Reddit post has its own unique id. I am storing each in a newline. An example from a live run:</p>
<pre><code class="language-python">2maolz
2mans2
2m6th9
2m6tfg
2mapgg
</code></pre>
<p>To start off, we will assume this file doesn’t exist:</p>
<pre><code class="language-python">if not os.path.isfile(&quot;posts_replied_to.txt&quot;):
    posts_replied_to = []
</code></pre>
<p>If the file doesn’t exist, which will be true the first time you run this program, create an empty list <em>posts_replied_to</em> .</p>
<p>If the file does exist, we open it. Let’s look at the code first. We will go over it line by line:</p>
<pre><code class="language-python">else:
    with open(&quot;posts_replied_to.txt&quot;, &quot;r&quot;) as f:
       posts_replied_to = f.read()
       posts_replied_to = posts_replied_to.split(&quot;\n&quot;)
       posts_replied_to = list(filter(None, posts_replied_to))
</code></pre>
<p>The above code is called if you have run the code at least once. Let’s go over it:</p>
<pre><code class="language-python">with open(&quot;posts_replied_to.txt&quot;, &quot;r&quot;) as f:
</code></pre>
<p>If you have never used Python’s <em>with</em> keyword, it’s a great feature. It opens the files for us, will close it, and all handle any errors. Saves us having to use try-catch blocks and handling errors ourself.</p>
<pre><code class="language-python">    posts_replied_to = f.read()
    posts_replied_to = posts_replied_to.split(&quot;\n&quot;)
</code></pre>
<p>We read our file, and split on newline. Remember our file contains the submission ids as newlines? Splitting on it will create a list with all the ids. Taking the example I used earlier, we will get:</p>
<pre><code class="language-python">['2maolz', '2mans2', '2m6th9', '2m6tfg', '2mapgg', '']
</code></pre>
<p>However, the list might still contain some empty values. See the last value above, it is an empty element. We get rid of them:</p>
<pre><code class="language-python">     posts_replied_to = list(filter(None, posts_replied_to))
</code></pre>
<p><em>Python 3 update</em>: We need to convert the filter back to  a list. <em>Groan</em>. Reason <a href="https://stackoverflow.com/a/34820949/6404125?ref=new.pythonforengineers.com">here</a>.</p>
<p>We now have a list <em>posts_replied_to</em> that is either empty or contains the submission ids from last runs.</p>
<pre><code class="language-python">subreddit = reddit.subreddit('pythonforengineers')
for submission in subreddit.hot(limit=5):
</code></pre>
<p>This code is the same as before. We get the last 5 entries from our subreddit.</p>
<pre><code class="language-python">if submission.id not in posts_replied_to:
</code></pre>
<p>Remember I said each Reddit post gets a unique id? It is stored in_ submission.id_. We check if this <em>id</em> exists in our list of posts we have replied to.</p>
<p>If it doesn’t, we check if the post contains the words : “I love Python”:</p>
<pre><code class="language-python">if re.search(&quot;i love python&quot;, submission.title, re.IGNORECASE):
</code></pre>
<p>I am using regular expressions for the search. This is because the post can be in capital or not, or a mix. If the words _i love python _were found, we need to reply to the post. This is how you do it:</p>
<pre><code class="language-python">submission.reply(&quot;Botty bot says: Me too!!&quot;)
</code></pre>
<p>The <em>reply()</em> is the function that adds a comment to the current submission.</p>
<pre><code class="language-python">print(&quot;Bot replying to : &quot;, submission.title)
posts_replied_to.append(submission.id)
</code></pre>
<p>The next important thing is to remember which posts we have replied to. So we add the <em>id</em> of the current post to our list <em>posts_replied_to</em>.</p>
<p>Finally, we write out our updated list back to the file:</p>
<pre><code class="language-python">with open(&quot;posts_replied_to.txt&quot;, &quot;w&quot;) as f:
    for post_id in posts_replied_to:
    f.write(post_id + &quot;\n&quot;)
</code></pre>
<p>And that’s it. Let’s give our bot a spin.</p>
<p>First, we post a message on our subreddit:</p>
<p><img src="../../content/images/2021/08/Reddit1.jpg" alt="Reddit1" loading="lazy"></p>
<p>We then run our Python script. Notice the Bot figures out the latest post, and only replies to that one:</p>
<p><img src="../../content/images/2021/08/Reddit2.jpg" alt="Reddit2" loading="lazy"></p>
<p>And then we reload our page to check that the bot has replied.</p>
<p><img src="../../content/images/2021/08/reddit3.jpg" alt="reddit3" loading="lazy"></p>
<h2 id="give-it-a-try">Give it a try</h2>
<p>Change the bot message to something unique, so we know whose bot is running (otherwise we’ll have dozens of similar messages, with no idea who posted what). If you can’t think of anything unique, just attach your Reddit username.</p>
<!--kg-card-end: markdown-->
    </section>


</article>



<aside class="read-more-wrap">
    <div class="read-more inner">



<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="../awesome-python-library-tenacity/index.html">
            <header class="post-card-header">
                <h2 class="post-card-title">Awesome Python Library: Tenacity</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Link: https://tenacity.readthedocs.io/en/latest/

When writing code or tests in Python, one issue I had was when the code would fail due to random things like network issues or external peripherals not responding in time. Just rerunning the tests would make them pass. The unreliability wasn&#39;</p>
            </section>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../../author/Shantnu/index.html" class="static-avatar">
                        <img class="author-profile-image" src="../../content/images/size/w100/2021/08/shantnu-foto-small-1.jpg" alt="Shantnu Tiwari" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="../../author/Shantnu/index.html">Shantnu Tiwari</a></span>
                <span class="post-card-byline-date"><time datetime="2024-04-10">Apr 10, 2024</time> <span class="bull">&bull;</span> 2 min read</span>
            </div>
        </footer>

    </div>

</article>

<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="../so-evidently/index.html">
            <header class="post-card-header">
                <h2 class="post-card-title">So Google&#x27;s Gemini Doesn&#x27;t Like Python Programming and Sanskrit?</h2>
            </header>
            <section class="post-card-excerpt">
                <p>I have been playing around with Googles Gemini Pro.

Recently, I wanted to write a blog on Python&#39;s decorators and wanted to get some ideas for practical projects I could build with them. Tried GPT4 first, it gave me the standard &quot;log analyser&quot; that all blogs</p>
            </section>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../../author/Shantnu/index.html" class="static-avatar">
                        <img class="author-profile-image" src="../../content/images/size/w100/2021/08/shantnu-foto-small-1.jpg" alt="Shantnu Tiwari" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="../../author/Shantnu/index.html">Shantnu Tiwari</a></span>
                <span class="post-card-byline-date"><time datetime="2024-02-25">Feb 25, 2024</time> <span class="bull">&bull;</span> 4 min read</span>
            </div>
        </footer>

    </div>

</article>

<article class="post-card post ">

    <a class="post-card-image-link" href="../linkedin-has-become-a-piece-of-garbage-even-more-than-usual/index.html">
        <img class="post-card-image"
            srcset="../../content/images/size/w300/2024/01/ae223740-840b-4d4a-9467-2522a67dcbbc.png 300w,
                   ../../content/images/size/w600/2024/01/ae223740-840b-4d4a-9467-2522a67dcbbc.pngg 600w,
                  ../../content/images/size/w1000/2024/01/ae223740-840b-4d4a-9467-2522a67dcbbc.pngng 1000w,
                 ../../content/images/size/w2000/2024/01/ae223740-840b-4d4a-9467-2522a67dcbbc.pngpng 2000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../../content/images/size/w600/2024/01/ae223740-840b-4d4a-9467-2522a67dcbbc.png"
            alt="LinkedIn Has Become a Pile of Garbage (even more than usual)"
            loading="lazy"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../linkedin-has-become-a-piece-of-garbage-even-more-than-usual/index.html">
            <header class="post-card-header">
                <h2 class="post-card-title">LinkedIn Has Become a Pile of Garbage (even more than usual)</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Online forums, especially Hacker News and Reddit, are very hostile to LinkedIn. Everyone makes fun of the self-promotion and silliness that goes there. There are complaints the site is unusable, which I didn&#39;t agree with until now.

I&#39;ve had an account there for a few years.</p>
            </section>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../../author/Shantnu/index.html" class="static-avatar">
                        <img class="author-profile-image" src="../../content/images/size/w100/2021/08/shantnu-foto-small-1.jpg" alt="Shantnu Tiwari" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="../../author/Shantnu/index.html">Shantnu Tiwari</a></span>
                <span class="post-card-byline-date"><time datetime="2024-01-29">Jan 29, 2024</time> <span class="bull">&bull;</span> 4 min read</span>
            </div>
        </footer>

    </div>

</article>

    </div>
</aside>


    </main>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="../../home/index.html">Python for Engineers</a> &copy; 2025</section>
            <nav class="site-footer-nav">

            </nav>


        </div>
    </footer>

</div>


<script
    src="/assets/js/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="../../assets/built/casper.js"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

<script src="/assets/js/prism.min.js" integrity="sha512-axJX7DJduStuBB8ePC8ryGzacZPr3rdLaIDZitiEgWWk2gsXxEFlm4UW0iNzj2h3wp5mOylgHAzBzM4nRSvTZA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



<script src="/assets/js/prism-toolbar.min.js" integrity="sha512-YrvgEHAi5/3o2OT+/vh1z19oJXk/Kk0qdVKbjEFl9VRmcLTaWRYzVziZCvoGpJ2TrnV7rB8pnJcz1ioVJjgw2A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>
</html>
